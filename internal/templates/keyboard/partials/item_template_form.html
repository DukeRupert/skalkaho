{{define "item_template_form"}}
<div class="inline-form px-4 py-3 border-b border-slate-200 bg-slate-100">
    <form hx-post="/items"
          hx-target="body"
          class="grid grid-cols-12 gap-2 items-center"
          id="item-template-form">

        <!-- Type Select -->
        <select name="type"
                class="col-span-1 px-2 py-1 border border-slate-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-slate-400 bg-white">
            <option value="material">M</option>
            <option value="labor">L</option>
            <option value="equipment">E</option>
        </select>

        <!-- Category Input -->
        <input type="text"
               name="category"
               list="category-list"
               placeholder="Category"
               class="col-span-2 px-2 py-1 border border-slate-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-slate-400 bg-white"
               required>
        <datalist id="category-list">
            {{range .Categories}}
            <option value="{{.}}">
            {{end}}
        </datalist>

        <!-- Name Input -->
        <input type="text"
               name="name"
               id="template-name-input"
               placeholder="Item name..."
               class="col-span-4 px-2 py-1 border border-slate-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-slate-400 bg-white"
               autofocus
               required>

        <!-- Default Unit -->
        <input type="text"
               name="default_unit"
               value="ea"
               placeholder="unit"
               class="col-span-2 px-2 py-1 border border-slate-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-slate-400 bg-white">

        <!-- Default Price -->
        <div class="col-span-2 flex items-center border border-slate-300 rounded focus-within:ring-2 focus-within:ring-slate-400 overflow-hidden bg-white">
            <span class="pl-2 text-slate-500 text-sm shrink-0">$</span>
            <input type="number"
                   name="default_price"
                   value="0.00"
                   step="0.01"
                   min="0"
                   placeholder="0.00"
                   class="min-w-0 flex-1 px-1 py-1 text-sm text-right focus:outline-none border-0 bg-transparent [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none">
        </div>

        <!-- Actions -->
        <div class="col-span-1 flex gap-1">
            <button type="submit"
                    class="px-2 py-1 bg-slate-900 text-white rounded text-xs hover:bg-slate-700">
                Save
            </button>
            <button type="button"
                    onclick="hideItemTemplateForm()"
                    class="px-2 py-1 bg-slate-200 text-slate-700 rounded text-xs hover:bg-slate-300">
                X
            </button>
        </div>
    </form>
    <p class="text-xs text-slate-500 mt-1">
        <kbd class="font-mono text-xs px-1.5 py-0.5 bg-slate-100 border border-slate-300 rounded text-slate-700">Tab</kbd> next field
        <kbd class="font-mono text-xs px-1.5 py-0.5 bg-slate-100 border border-slate-300 rounded text-slate-700 ml-2">Enter</kbd> save
        <kbd class="font-mono text-xs px-1.5 py-0.5 bg-slate-100 border border-slate-300 rounded text-slate-700 ml-2">Esc</kbd> cancel
    </p>
</div>
<script>
(function() {
    const form = document.getElementById('item-template-form');
    htmx.process(form);

    const nameInput = document.getElementById('template-name-input');
    if (nameInput) {
        nameInput.focus();
    }
})();
</script>
{{end}}
