{{define "match_row"}}
<tr id="match-{{.ID}}" class="{{if eq .Status "auto_approved"}}bg-forest-50{{else if eq .Status "approved"}}bg-blue-50{{else if eq .Status "rejected"}}bg-slate-50 opacity-60{{else}}bg-amber-50{{end}}">
    <td class="px-3 py-3">
        <div class="font-medium text-slate-900 text-sm">{{.SourceName}}</div>
        {{if .SourceUnit.Valid}}
        <div class="text-xs text-slate-500">{{.SourceUnit.String}}</div>
        {{end}}
    </td>
    <td class="px-3 py-3">
        {{if .MatchedTemplateID.Valid}}
        <div class="font-medium text-slate-900 text-sm">Template #{{.MatchedTemplateID.Int64}}</div>
        {{else}}
        <span class="text-sm text-slate-400 italic">No match</span>
        {{end}}
    </td>
    <td class="px-3 py-3 text-right">
        <span class="font-mono text-sm text-slate-900">${{printf "%.2f" .SourcePrice}}</span>
    </td>
    <td class="px-3 py-3 text-right">
        <span class="text-sm text-slate-400">-</span>
    </td>
    <td class="px-3 py-3 text-center">
        <span class="inline-flex items-center rounded-full px-2 py-1 text-xs font-medium
            {{if ge .Confidence 0.9}}bg-forest-100 text-forest-700
            {{else if ge .Confidence 0.7}}bg-blue-100 text-blue-700
            {{else if ge .Confidence 0.5}}bg-amber-100 text-amber-700
            {{else}}bg-slate-100 text-slate-600{{end}}">
            {{printf "%.0f" (mul .Confidence 100)}}%
        </span>
    </td>
    <td class="px-3 py-3">
        <span class="inline-flex items-center rounded-full px-2 py-1 text-xs font-medium
            {{if eq .Status "auto_approved"}}bg-forest-100 text-forest-700
            {{else if eq .Status "approved"}}bg-blue-100 text-blue-700
            {{else if eq .Status "rejected"}}bg-slate-200 text-slate-600
            {{else}}bg-amber-100 text-amber-700{{end}}">
            {{if eq .Status "auto_approved"}}Auto
            {{else if eq .Status "approved"}}Approved
            {{else if eq .Status "rejected"}}Rejected
            {{else}}Pending{{end}}
        </span>
    </td>
    <td class="px-3 py-3 text-right">
        <!-- Status already updated, no actions needed -->
    </td>
</tr>
{{end}}
