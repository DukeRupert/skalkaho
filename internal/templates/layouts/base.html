{{define "header"}}
<header class="bg-white shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
            <a href="/" class="text-xl font-bold text-gray-900">Skalkaho</a>
            <nav class="flex items-center gap-4">
                <a href="/" class="text-gray-600 hover:text-gray-900">Quotes</a>
                <a href="/settings" class="text-gray-600 hover:text-gray-900">Settings</a>
            </nav>
        </div>
    </div>
</header>
{{end}}

{{define "head"}}
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Skalkaho - Construction Quoting</title>
<script src="https://cdn.tailwindcss.com"></script>
<script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
<script src="https://unpkg.com/htmx.org@1.9.10"></script>
<style>
    [x-cloak] { display: none !important; }
</style>
{{end}}

{{define "toast"}}
<div x-data="toastManager()"
     @show-toast.window="addToast($event.detail)"
     class="fixed bottom-4 right-4 z-50 flex flex-col gap-2">
    <template x-for="toast in toasts" :key="toast.id">
        <div x-show="toast.visible"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0 transform translate-x-4"
             x-transition:enter-end="opacity-100 transform translate-x-0"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100"
             x-transition:leave-end="opacity-0"
             class="px-4 py-3 rounded-lg shadow-lg"
             :class="{
                 'bg-green-500 text-white': toast.type === 'success',
                 'bg-red-500 text-white': toast.type === 'error',
                 'bg-blue-500 text-white': toast.type === 'info'
             }">
            <span x-text="toast.message"></span>
        </div>
    </template>
</div>
<script>
function toastManager() {
    return {
        toasts: [],
        addToast(detail) {
            const id = Date.now();
            this.toasts.push({ id, ...detail, visible: true });
            setTimeout(() => this.removeToast(id), 3000);
        },
        removeToast(id) {
            const toast = this.toasts.find(t => t.id === id);
            if (toast) toast.visible = false;
            setTimeout(() => {
                this.toasts = this.toasts.filter(t => t.id !== id);
            }, 300);
        }
    };
}
</script>
{{end}}
